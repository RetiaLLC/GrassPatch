from hw import * # getting all the things from the hardware module so we can access them easily
import random
import network

import json, binascii, hashlib # for SSID and password generation

#sleep(3) # time for you to connect to the terminal, feel free to remove

print("I2C sensors found: {}".format(", ".join((hex(i) for i in i2c_grass.scan()))))

# showing the "cutie" image on startup
show_compressed(cutie_c)

#############
# WiFi config
#############

# disabling both network interfaces by default, reenable as needed
# and generating random SSID and password on the AP IF so that it's configured securely when you enable it

getrandomhex = lambda: binascii.hexlify(hashlib.sha1(str(random.getrandbits(10))).digest())

# if psk file exists, loading it, otherwise generating a new psk
try:
    with open("wifi.json", "r") as f:
        j = json.load(f)
    psk = j["psk"]
    print("PSK loaded", psk)
except Exception as e:
    # psk loading failed for some reason - either nonexistent file or some weirdness
    print(e)
    psk = getrandomhex()[:12].upper()
    with open("wifi.json", "w") as f:
        j = {"psk":psk}
        json.dump(j, f)
    print("PSK generated and saved", psk)

# AP setup
ap = network.WLAN(network.AP_IF)

# static SSID that depends on the MAC address
ssid = "Nugget-"+binascii.hexlify(ap.config('mac')[2:]).decode("ascii").upper()

ap.active(True) # needed to set AP parameters
sleep(0.5) # sometimes needed so that AP config doesn't fail immediately
ap.config(essid=ssid, password=psk)

# check if right button is pressed
# we're not going to use this code for now, but if you want AP mode disable-able, uncomment it!
"""
buttons.update()
if buttons.right:
    # Keeping AP active and showing SSID&PSK on the screen
    lcd.text(ssid, 3, 3)
    lcd.text(psk, 3, 64-(1+8))
    lcd.show()
    sleep(2)
else:
    # right button not pressed, disabling the AP
    ap.active(False)
"""
print("SSID:", ssid, "PSK:", psk, "active:", ap.active())


# STA setup
sta = network.WLAN(network.STA_IF)
sta.active(False) # change to True to enable client mode
# uncomment and change this to connect to an AP
#sta.connect("yer router SSID", "password")

wifi_connect_timeout = 10
def wait_for_wifi_connection():
    counter = 0
    lcd.fill_rect(3, 3, 3+8*21, 3+8, 0)
    lcd.text("wifi connect "+str(wifi_connect_timeout-counter), 3, 3)
    lcd.show()
    while not sta.isconnected() and counter < wifi_connect_timeout:
        sleep(1)
        counter += 1
        lcd.fill_rect(3, 3, 3+8*21, 3+8, 0)
        lcd.text("wifi connect "+str(wifi_connect_timeout-counter), 3, 3)
        lcd.show()
    print("Connection failed" if not sta.isconnected() else "Connection successful")
    lcd.fill_rect(3, 3, 3+8*21, 3+8, 0)
    lcd.text("connect ok" if sta.isconnected() else "connect fail", 3, 3)
    lcd.show()
    sleep(0.5) # showing connection status on the screen for a bit longer
    return sta.isconnected()

# uncomment these three lines if you want to wait till you're connected to your router
#lcd.text("connecting to wifi", 3, 3)
#wait_for_wifi_connection()
#lcd.fill_rect(3, 3, 3+8*21, 3+8, 0)

#####################
# start of the script
#####################

np = get_neopixels(1) # only one Neopixel connected - increase the number if you have more

# waiting for "up" button
np[0] = (127, 0, 0)
np.write()
lcd.fill_rect(3, 3, 3+8*21, 3+8, 0)
lcd.text("press up", 3, 3)
lcd.show()
while not buttons.up:
    buttons.update()

# waiting for "right" button
np[0] = (127, 127, 0)
np.write()
lcd.fill_rect(3, 3, 3+8*len("press_up"), 3+8, 0) # quickly overwrite last message
# default font characters are 8 pixels tall and 8 pixels wide
# so, we need to clean a space that's 8 pixels tall and 8*len(last_text) pixels wide
lcd.text("press right", 3, 3)
lcd.show()
while not buttons.right:
    buttons.update()

# waiting for "down" button
np[0] = (0, 127, 0)
np.write()
lcd.fill_rect(3, 3, 3+8*len("press right"), 3+8, 0)
lcd.text("press down", 3, 3)
lcd.show()
while not buttons.down:
    buttons.update()

# waiting for "left" button
np[0] = (0, 0, 127)
np.write()
lcd.fill_rect(3, 3, 3+8*len("press down"), 3+8, 0)
lcd.text("press left", 3, 3)
lcd.show()
while not buttons.left:
    buttons.update()

# button pressed, clearing last message
lcd.fill_rect(3, 3, 3+8*10, 3+8, 0)
lcd.show()


# some "animations"

def schroedinger():
    buttons.update()
    while buttons.left:
        show_compressed(cutie_c)
        show_compressed(dead_c)
        buttons.update()
    # random image after button is released
    if random.getrandbits(1) == 1:
        show_compressed(cutie_c)

def caramelldansen():
    buttons.update()
    while buttons.right:
        np[0] = [random.getrandbits(6) for i in range(3)]
        np.write()
        sleep(0.27)
        lcd.flip(not lcd.flip_en, update=False)
        show_compressed(cutie_c)
        np[0] = [random.getrandbits(6) for i in range(3)]
        np.write()
        sleep(0.27)
        show_compressed(nyaa_c)
        buttons.update()
    # unflipping your LCD
    lcd.flip(True, update=False)

buttons.cb = {"left":schroedinger, "right":caramelldansen, "up":lambda: show_compressed(cutie_c), "down":lambda: show_compressed(dead_c)}

def button_test():
    # call this function from REPL to test your buttons' reaction time and debouncing
    # adjust buttons.debounce_time up or down accordingly
    # lower debounce time - quicker reaction to repeated keypresses
    # higher debounce time - bigger chance of button bounce
    buttons.cb = {"left":lambda: print("left"),
                  "right":lambda: print("right"),
                  "up":lambda: print("up"),
                  "down":lambda: print("down")}
    while True:
        buttons.update()


def shush():
    buzz.duty_u16(0)
    buzz.freq(2048) # just setting the frequency to something reasonable

def play_melody(notes, volume=2048*2):
    for freq, duration in notes:
        if duration < 0: continue # fix for negative durations that are somehow left over =(
        if freq == 0:
            buzz.duty_u16(0)
        else:
            buzz.duty_u16(0)
            buzz.freq(int(freq))
            buzz.duty_u16(volume)
        sleep(duration)
    buzz.duty_u16(0) # shut off on exit
    buzz.freq(volume)

def play_smasnug(**kwargs):
    #######################################
    # SMASNUG MODE ACTIVATED
    #######################################
    print("SMASNUG")
    notes = [(659.26, 0.22), (0, 0.08), (880.0, 0.22), (0, 0.08), (880.0, 0.22), (0, 0.07), (1108.73, 0.22), (0, 0.08), (1108.73, 0.22), (0, 0.07), (880.0, 0.6), (659.26, 0.23), (0, 0.08), (659.26, 0.15), (0, -0.15), (659.26, 0.15), (0, 0.15), (659.26, 0.38), (0, 0.08), (659.26, 0.15), (987.77, 0.15), (880.0, 0.15), (830.61, 0.15), (739.99, 0.15), (659.26, 0.52), (0, 0.38), (659.26, 0.22), (0, 0.08), (880.0, 0.22), (0, 0.08), (880.0, 0.3), (1108.73, 0.23), (0, 0.07), (1108.73, 0.23), (0, 0.08), (880.0, 0.45), (0, 0.15), (659.26, 0.22), (0, 0.08), (880.0, 0.23), (0, 0.07), (830.61, 0.3), (739.99, 0.15), (830.61, 0.15), (880.0, 0.23), (0, 0.07), (622.25, 0.3), (659.26, 0.52), (0, 0.38), (659.26, 0.3), (830.61, 0.22), (0, 0.08), (830.61, 0.3), (880.0, 0.15), (830.61, 0.15), (739.99, 0.15), (830.61, 0.15), (880.0, 0.45), (0, 0.15), (659.26, 0.22), (0, 0.07), (880.0, 0.3), (830.61, 0.22), (0, 0.08), (830.61, 0.22), (0, 0.07), (830.61, 0.15), (1174.66, 0.15), (987.77, 0.15), (830.61, 0.15), (880.0, 0.53), (0, 0.38), (880.0, 0.22), (0, 0.08), (739.99, 0.22), (0, 0.07), (739.99, 0.23), (0, 0.07), (739.99, 0.22), (0, 0.08), (880.0, 0.22), (0, 0.07), (880.0, 0.53), (0, 0.07), (659.26, 0.23), (0, 0.07), (659.26, 0.23), (0, 0.07), (659.26, 0.38), (0, 0.07), (659.26, 0.15), (987.77, 0.3), (830.61, 0.3), (880.0, 0.52), (0, 0.38), (880.0, 0.22), (0, 0.07), (830.61, 0.15), (739.99, 0.07), (0, 0.07), (739.99, 0.23), (0, 0.07), (739.99, 0.15), (880.0, 0.15), (830.61, 0.15), (987.77, 0.15), (880.0, 0.52), (0, 0.07), (659.26, 0.23), (0, 0.07), (659.26, 0.23), (0, 0.07), (659.26, 0.38), (0, 0.07), (659.26, 0.15), (987.77, 0.3), (830.61, 0.3), (880.0, 0.6), (0, 0.15), (1108.73, 0.23), (0, 0.07), (1318.51, 0.15), (987.77, 0.15), (1108.73, 0.15), (880.0, 0.15), (739.99, 0.23)] #smasnug
    play_melody(notes, **kwargs)
    print("SMASNUGN'T")

def play_amogus(**kwargs):
    notes = [(0, 0.6), (523.25, 0.3), (622.25, 0.3), (698.46, 0.3), (739.99, 0.3), (698.46, 0.3), (0, -2.1), (65.41, 2.25), (0, -0.15), (622.25, 0.3), (523.25, 0.9), (466.16, 0.15), (587.33, 0.15), (523.25, 0.6), (0, 0.3), (49.0, 0.3), (0, 0.6), (523.25, 0.3), (622.25, 0.3), (698.46, 0.3), (739.99, 0.3), (698.46, 0.3), (0, -2.1), (65.41, 2.25), (0, -0.15), (622.25, 0.3), (739.99, 0.9), (0, 0.3), (739.99, 0.15), (0, 0.05), (698.46, 0.15), (0, 0.05), (622.25, 0.15), (0, -0.55), (65.41, 0.6), (739.99, 0.15), (0, 0.05), (698.46, 0.15), (0, 0.05), (622.25, 0.15), (0, -0.55), (130.81, 0.6), (0, 0.6), (523.25, 0.3), (622.25, 0.3), (0, -1.2), (65.41, 1.2), (0, -1.2), (130.81, 1.2), (698.46, 0.3), (739.99, 0.3), (698.46, 0.3), (0, -0.6), (65.41, 0.9), (0, -0.9), (130.81, 0.9), (0, -0.3), (622.25, 0.3), (523.25, 0.9), (466.16, 0.15), (0, -1.05), (130.81, 1.2), (0, -1.2), (65.41, 1.2), (0, -0.15), (587.33, 0.15), (523.25, 0.6), (0, -0.3), (130.81, 0.45), (0, -0.45), (261.63, 0.45), (233.08, 0.15), (0, -0.15), (116.54, 0.15), (196.0, 0.3), (0, -0.3), (98.0, 0.3), (0, 0.6), (523.25, 0.3), (622.25, 0.3), (0, -1.2), (65.41, 1.2), (0, -1.2), (130.81, 1.2), (698.46, 0.3), (739.99, 0.3), (698.46, 0.3), (622.25, 0.3), (0, -0.9), (77.78, 0.9), (0, -0.9), (155.56, 0.9), (92.5, 0.6), (0, -0.6), (185.0, 0.6), (0, -0.6), (739.99, 0.9), (0, -0.3), (185.0, 0.45), (0, -0.45), (92.5, 0.45), (185.0, 0.15), (0, -0.15), (92.5, 0.15), (739.99, 0.15), (185.0, 0.15), (0, -0.15), (92.5, 0.15), (0, -0.1), (698.46, 0.15), (0, 0.05), (622.25, 0.15), (0, -0.25), (185.0, 0.3), (0, -0.3), (92.5, 0.3), (739.99, 0.15), (0, -0.15), (92.5, 0.3), (0, -0.3), (185.0, 0.3), (0, -0.1), (698.46, 0.15), (0, 0.05), (622.25, 0.15), (0, -0.25), (185.0, 0.3), (0, -0.3), (92.5, 0.3), (130.81, 0.6), (0, -0.6), (65.41, 0.6), (261.63, 0.3), (311.13, 0.3), (349.23, 0.3), (369.99, 0.3), (349.23, 0.3), (311.13, 0.3), (261.63, 0.9), (233.08, 0.15), (293.66, 0.15), (261.63, 0.6), (0, -0.3), (98.0, 0.9), (0, -0.9), (49.0, 0.9), (0, 0.6), (261.63, 0.3), (0, -0.9), (65.41, 1.2), (0, -1.2), (130.81, 1.2), (0, -0.3), (311.13, 0.3), (349.23, 0.3), (369.99, 0.3), (349.23, 0.3), (0, -0.6), (155.56, 0.9), (0, -0.9), (77.78, 0.9), (0, -0.3), (311.13, 0.3), (185.0, 0.6), (0, -0.6), (92.5, 0.6), (0, -0.6), (369.99, 0.9), (0, -0.3), (92.5, 0.45), (0, -0.45), (185.0, 0.45), (92.5, 0.15), (0, -0.15), (185.0, 0.15), (369.99, 0.15), (92.5, 0.15), (0, -0.15), (185.0, 0.15), (0, -0.1), (349.23, 0.15), (0, 0.05), (311.13, 0.15), (0, -0.25), (185.0, 0.3), (0, -0.3), (92.5, 0.3), (369.99, 0.15), (0, -0.15), (92.5, 0.3), (0, -0.3), (185.0, 0.3), (0, -0.1), (349.23, 0.15), (0, 0.05), (311.13, 0.15), (0, -0.25), (185.0, 0.3), (0, -0.3), (92.5, 0.3), (0, 0.6), (523.25, 0.3), (0, -0.9), (130.81, 1.2), (0, -1.2), (65.41, 1.2), (0, -0.3), (622.25, 0.3), (698.46, 0.3), (739.99, 0.3), (698.46, 0.3), (0, -0.6), (130.81, 0.9), (0, -0.9), (65.41, 0.9), (0, -0.3), (622.25, 0.3), (523.25, 0.9), (466.16, 0.15), (587.33, 0.15), (0, -1.2), (65.41, 1.2), (0, -1.2), (130.81, 1.2), (523.25, 0.6), (0, -0.3), (130.81, 0.45), (0, -0.45), (261.63, 0.45), (116.54, 0.15), (0, -0.15), (233.08, 0.15), (196.0, 0.3), (0, -0.3), (98.0, 0.3), (0, 0.6), (523.25, 0.3), (0, -0.9), (65.41, 1.2), (0, -0.3), (622.25, 0.3), (0, -1.2), (130.81, 1.2), (698.46, 0.3), (739.99, 0.3), (698.46, 0.3), (0, -0.6), (77.78, 0.9), (0, -0.3), (622.25, 0.3), (0, -0.9), (155.56, 0.9), (92.5, 0.6), (0, -0.6), (185.0, 0.6), (0, -0.6), (739.99, 0.9), (0, -0.3), (92.5, 0.45), (0, -0.45), (185.0, 0.45), (92.5, 0.15), (0, -0.15), (185.0, 0.15), (739.99, 0.15), (185.0, 0.15), (0, -0.15), (92.5, 0.15), (0, -0.1), (698.46, 0.15), (0, 0.05), (622.25, 0.15), (0, -0.25), (92.5, 0.3), (0, -0.3), (185.0, 0.3), (739.99, 0.15), (0, -0.15), (92.5, 0.3), (0, -0.3), (185.0, 0.3), (0, -0.1), (698.46, 0.15), (0, 0.05), (622.25, 0.15), (0, -0.25), (92.5, 0.3), (0, -0.3), (185.0, 0.3), (130.81, 0.6), (0, -0.6), (65.41, 0.6), (261.63, 0.3), (311.13, 0.3), (349.23, 0.3), (369.99, 0.3), (349.23, 0.3), (311.13, 0.3), (261.63, 0.9), (233.08, 0.15), (293.66, 0.15), (261.63, 0.6), (0, -0.3), (98.0, 0.9), (0, -0.9), (49.0, 0.9), (0, 0.6), (261.63, 0.3), (0, -0.9), (130.81, 1.2), (0, -1.2), (65.41, 1.2), (0, -0.3), (311.13, 0.3), (349.23, 0.3), (369.99, 0.3), (349.23, 0.3), (0, -0.6), (155.56, 0.9), (0, -0.9), (77.78, 0.9), (0, -0.3), (311.13, 0.3), (185.0, 0.6), (0, -0.6), (92.5, 0.6), (0, -0.6), (369.99, 0.9), (0, 0.6), (77.78, 0.3), (0, -0.3), (155.56, 0.3), (185.0, 0.6), (0, -0.6), (92.5, 0.6), (0, 0.6), (523.25, 0.3), (622.25, 0.3), (0, -1.2), (65.41, 1.2), (0, -1.2), (130.81, 1.2), (698.46, 0.3), (739.99, 0.3), (698.46, 0.3), (0, -0.6), (130.81, 0.9), (0, -0.3), (622.25, 0.3), (0, -0.9), (65.41, 0.9), (523.25, 0.9), (466.16, 0.15), (0, -1.05), (65.41, 1.2), (0, -0.15), (587.33, 0.15), (0, -1.2), (130.81, 1.2), (523.25, 0.6), (0, -0.3), (261.63, 0.45), (0, -0.45), (130.81, 0.45), (233.08, 0.15), (0, -0.15), (116.54, 0.15), (196.0, 0.3), (0, -0.3), (98.0, 0.3), (0, 0.6), (523.25, 0.3), (622.25, 0.3), (0, -1.2), (65.41, 1.2), (0, -1.2), (130.81, 1.2), (698.46, 0.3), (739.99, 0.3), (698.46, 0.3), (0, -0.6), (155.56, 0.9), (0, -0.3), (622.25, 0.3), (0, -0.9), (77.78, 0.9), (185.0, 0.6), (0, -0.6), (92.5, 0.6), (0, -0.6), (739.99, 0.9), (0, -0.3), (92.5, 0.45), (0, -0.45), (185.0, 0.45), (185.0, 0.15), (0, -0.15), (92.5, 0.15), (739.99, 0.15), (185.0, 0.15), (0, -0.15), (92.5, 0.15), (0, -0.1), (698.46, 0.15), (0, 0.05), (622.25, 0.15), (0, -0.25), (185.0, 0.3), (0, -0.3), (92.5, 0.3), (739.99, 0.15), (0, -0.15), (185.0, 0.3), (0, -0.3), (92.5, 0.3), (0, -0.1), (698.46, 0.15), (0, 0.05), (622.25, 0.15), (0, -0.25), (185.0, 0.3), (0, -0.3), (92.5, 0.3), (523.25, 2.25), (0, -1.65), (130.81, 1.65), (0, -1.65), (65.41, 1.65)] # amogus
    play_melody(notes, **kwargs)

def play_nyan(**kwargs):
    notes = [(739.99, 0.21), (830.61, 0.11), (0, 0.11), (554.37, 0.11), (622.25, 0.21), (493.88, 0.05), (0, 0.05), (587.33, 0.11), (554.37, 0.11), (493.88, 0.11), (0, 0.11), (493.88, 0.11), (0, 0.11), (554.37, 0.21), (587.33, 0.11), (0, 0.11), (587.33, 0.05), (0, 0.05), (554.37, 0.05), (0, 0.05), (493.88, 0.11), (554.37, 0.11), (622.25, 0.11), (739.99, 0.11), (830.61, 0.11), (622.25, 0.11), (739.99, 0.11), (554.37, 0.11), (587.33, 0.11), (493.88, 0.11), (554.37, 0.11), (493.88, 0.11), (622.25, 0.21), (739.99, 0.11), (0, 0.11), (830.61, 0.11), (622.25, 0.11), (739.99, 0.11), (554.37, 0.11), (587.33, 0.11), (493.88, 0.11), (554.37, 0.11), (622.25, 0.11), (587.33, 0.11), (554.37, 0.11), (493.88, 0.11), (554.37, 0.11), (587.33, 0.11), (0, 0.11), (493.88, 0.11), (554.37, 0.11), (587.33, 0.11), (739.99, 0.11), (554.37, 0.11), (587.33, 0.11), (554.37, 0.11), (493.88, 0.11), (554.37, 0.11), (0, 0.11), (493.88, 0.11), (0, 0.11), (554.37, 0.11), (0, 0.11), (739.99, 0.21), (830.61, 0.11), (0, 0.11), (554.37, 0.11), (622.25, 0.21), (493.88, 0.05), (0, 0.05), (587.33, 0.11), (554.37, 0.11), (493.88, 0.11), (0, 0.11), (493.88, 0.11), (0, 0.11), (554.37, 0.21), (587.33, 0.11), (0, 0.11), (587.33, 0.05), (0, 0.05), (554.37, 0.05), (0, 0.05), (493.88, 0.11), (554.37, 0.11), (622.25, 0.11), (739.99, 0.11), (830.61, 0.11), (622.25, 0.11), (739.99, 0.11), (554.37, 0.11), (587.33, 0.11), (493.88, 0.11), (554.37, 0.11), (493.88, 0.11), (622.25, 0.21), (739.99, 0.11), (0, 0.11), (830.61, 0.11), (622.25, 0.11), (739.99, 0.11), (554.37, 0.11), (587.33, 0.11), (493.88, 0.11), (554.37, 0.11), (622.25, 0.11), (587.33, 0.11), (554.37, 0.11), (493.88, 0.11), (554.37, 0.11), (587.33, 0.11), (0, 0.11), (493.88, 0.11), (554.37, 0.11), (587.33, 0.11), (739.99, 0.11), (554.37, 0.11), (587.33, 0.11), (554.37, 0.11), (493.88, 0.11), (554.37, 0.21), (493.88, 0.11), (0, 0.11), (493.88, 0.11), (0, 0.11), (493.88, 0.11), (0, 0.11), (369.99, 0.11), (415.3, 0.11), (493.88, 0.11), (0, 0.11), (369.99, 0.11), (415.3, 0.11), (493.88, 0.11), (554.37, 0.11), (622.25, 0.11), (554.37, 0.11), (659.26, 0.11), (622.25, 0.11), (659.26, 0.11), (739.99, 0.11), (493.88, 0.11), (0, 0.11), (493.88, 0.11), (0, 0.11), (369.99, 0.11), (415.3, 0.11), (493.88, 0.11), (415.3, 0.11), (659.26, 0.11), (622.25, 0.11), (554.37, 0.11), (493.88, 0.11), (369.99, 0.11), (311.13, 0.11), (329.63, 0.11), (369.99, 0.11), (493.88, 0.11), (0, 0.11), (369.99, 0.11), (415.3, 0.11), (493.88, 0.11), (0, 0.11), (369.99, 0.11), (415.3, 0.11), (493.88, 0.11), (493.88, 0.11), (554.37, 0.11), (622.25, 0.11), (493.88, 0.11), (369.99, 0.11), (415.3, 0.11), (369.99, 0.11), (493.88, 0.21), (493.88, 0.11), (466.16, 0.11), (493.88, 0.11), (369.99, 0.11), (415.3, 0.11), (493.88, 0.11), (659.26, 0.11), (622.25, 0.11), (659.26, 0.11), (739.99, 0.11), (493.88, 0.11), (0, 0.11), (466.16, 0.11), (0, 0.11), (493.88, 0.11), (0, 0.11), (369.99, 0.11), (415.3, 0.11), (493.88, 0.11), (0, 0.11), (369.99, 0.11), (415.3, 0.11), (493.88, 0.11), (554.37, 0.11), (622.25, 0.11), (554.37, 0.11), (659.26, 0.11), (622.25, 0.11), (659.26, 0.11), (739.99, 0.11), (493.88, 0.11), (0, 0.11), (493.88, 0.11), (0, 0.11), (369.99, 0.11), (415.3, 0.11), (493.88, 0.11), (415.3, 0.11), (659.26, 0.11), (622.25, 0.11), (554.37, 0.11), (493.88, 0.11), (369.99, 0.11), (311.13, 0.11), (329.63, 0.11), (369.99, 0.11), (493.88, 0.11), (0, 0.11), (369.99, 0.11), (415.3, 0.11), (493.88, 0.11), (0, 0.11), (369.99, 0.11), (415.3, 0.11), (493.88, 0.11), (493.88, 0.11), (554.37, 0.11), (622.25, 0.11), (493.88, 0.11), (369.99, 0.11), (415.3, 0.11), (369.99, 0.11), (493.88, 0.21), (493.88, 0.11), (466.16, 0.11), (493.88, 0.11), (369.99, 0.11), (415.3, 0.11), (493.88, 0.11), (659.26, 0.11), (622.25, 0.11), (659.26, 0.11), (739.99, 0.11), (493.88, 0.21), (554.37, 0.21), (739.99, 0.21), (830.61, 0.11), (0, 0.11), (554.37, 0.11), (622.25, 0.21), (493.88, 0.05), (0, 0.05), (587.33, 0.11), (554.37, 0.11), (493.88, 0.11), (0, 0.11), (493.88, 0.11), (0, 0.11), (554.37, 0.21), (587.33, 0.11), (0, 0.11), (587.33, 0.05), (0, 0.05), (554.37, 0.05), (0, 0.05), (493.88, 0.11), (554.37, 0.11), (622.25, 0.11), (739.99, 0.11), (830.61, 0.11), (622.25, 0.11), (739.99, 0.11), (554.37, 0.11), (587.33, 0.11), (493.88, 0.11), (554.37, 0.11), (493.88, 0.11), (622.25, 0.21), (739.99, 0.11), (0, 0.11), (830.61, 0.11), (622.25, 0.11), (739.99, 0.11), (554.37, 0.11), (587.33, 0.11), (493.88, 0.11), (554.37, 0.11), (622.25, 0.11), (587.33, 0.11), (554.37, 0.11), (493.88, 0.11), (554.37, 0.11), (587.33, 0.11), (0, 0.11), (493.88, 0.11), (554.37, 0.11), (587.33, 0.11), (739.99, 0.11), (554.37, 0.11), (587.33, 0.11), (554.37, 0.11), (493.88, 0.11), (554.37, 0.11), (0, 0.11), (493.88, 0.11), (0, 0.11), (554.37, 0.11), (0, 0.11), (739.99, 0.21), (830.61, 0.11), (0, 0.11), (554.37, 0.11), (622.25, 0.21), (493.88, 0.05), (0, 0.05), (587.33, 0.11), (554.37, 0.11), (493.88, 0.11), (0, 0.11), (493.88, 0.11), (0, 0.11), (554.37, 0.21), (587.33, 0.11), (0, 0.11), (587.33, 0.05), (0, 0.05), (554.37, 0.05), (0, 0.05), (493.88, 0.11), (554.37, 0.11), (622.25, 0.11), (739.99, 0.11), (830.61, 0.11), (622.25, 0.11), (739.99, 0.11), (554.37, 0.11), (587.33, 0.11), (493.88, 0.11), (554.37, 0.11), (493.88, 0.11), (622.25, 0.21), (739.99, 0.11), (0, 0.11), (830.61, 0.11), (622.25, 0.11), (739.99, 0.11), (554.37, 0.11), (587.33, 0.11), (493.88, 0.11), (554.37, 0.11), (622.25, 0.11), (587.33, 0.11), (554.37, 0.11), (493.88, 0.11), (554.37, 0.11), (587.33, 0.11), (0, 0.11), (493.88, 0.11), (554.37, 0.11), (587.33, 0.11), (739.99, 0.11), (554.37, 0.11), (587.33, 0.11), (554.37, 0.11), (493.88, 0.11), (554.37, 0.21), (493.88, 0.11), (0, 0.11), (493.88, 0.11), (0, 0.11), (493.88, 0.11), (0, 0.11), (369.99, 0.11), (415.3, 0.11), (493.88, 0.11), (0, 0.11), (369.99, 0.11), (415.3, 0.11), (493.88, 0.11), (554.37, 0.11), (622.25, 0.11), (554.37, 0.11), (659.26, 0.11), (622.25, 0.11), (659.26, 0.11), (739.99, 0.11), (493.88, 0.11), (0, 0.11), (493.88, 0.11), (0, 0.11), (369.99, 0.11), (415.3, 0.11), (493.88, 0.11), (415.3, 0.11), (659.26, 0.11), (622.25, 0.11), (554.37, 0.11), (493.88, 0.11), (369.99, 0.11), (311.13, 0.11), (329.63, 0.11), (369.99, 0.11), (493.88, 0.11), (0, 0.11), (369.99, 0.11), (415.3, 0.11), (493.88, 0.11), (0, 0.11), (369.99, 0.11), (415.3, 0.11), (493.88, 0.11), (493.88, 0.11), (554.37, 0.11), (622.25, 0.11), (493.88, 0.11), (369.99, 0.11), (415.3, 0.11), (369.99, 0.11), (493.88, 0.21), (493.88, 0.11), (466.16, 0.11), (493.88, 0.11), (369.99, 0.11), (415.3, 0.11), (493.88, 0.11), (659.26, 0.11), (622.25, 0.11), (659.26, 0.11), (739.99, 0.11), (493.88, 0.11), (0, 0.11), (466.16, 0.11), (0, 0.11), (493.88, 0.11), (0, 0.11), (369.99, 0.11), (415.3, 0.11), (493.88, 0.11), (0, 0.11), (369.99, 0.11), (415.3, 0.11), (493.88, 0.11), (554.37, 0.11), (622.25, 0.11), (554.37, 0.11), (659.26, 0.11), (622.25, 0.11), (659.26, 0.11), (739.99, 0.11), (493.88, 0.11), (0, 0.11), (493.88, 0.11), (0, 0.11), (369.99, 0.11), (415.3, 0.11), (493.88, 0.11), (415.3, 0.11), (659.26, 0.11), (622.25, 0.11), (554.37, 0.11), (493.88, 0.11), (369.99, 0.11), (311.13, 0.11), (329.63, 0.11), (369.99, 0.11), (493.88, 0.11), (0, 0.11), (369.99, 0.11), (415.3, 0.11), (493.88, 0.11), (0, 0.11), (369.99, 0.11), (415.3, 0.11), (493.88, 0.11), (493.88, 0.11), (554.37, 0.11), (622.25, 0.11), (493.88, 0.11), (369.99, 0.11), (415.3, 0.11), (369.99, 0.11), (493.88, 0.21), (493.88, 0.11), (466.16, 0.11), (493.88, 0.11), (369.99, 0.11), (415.3, 0.11), (493.88, 0.11), (659.26, 0.11), (622.25, 0.11), (659.26, 0.11), (739.99, 0.11), (493.88, 0.21), (554.37, 0.21), (164.81, 0.21), (0, -0.21), (164.81, 0.21), (329.63, 0.21), (0, -0.21), (329.63, 0.21), (185.0, 0.21), (0, -0.21), (185.0, 0.21), (369.99, 0.21), (0, -0.21), (369.99, 0.21), (155.56, 0.21), (0, -0.21), (155.56, 0.21), (311.13, 0.21), (0, -0.21), (311.13, 0.21), (207.65, 0.21), (0, -0.21), (207.65, 0.21), (415.3, 0.21), (0, -0.21), (415.3, 0.21), (138.59, 0.21), (0, -0.21), (138.59, 0.21), (277.18, 0.21), (0, -0.21), (277.18, 0.21), (185.0, 0.21), (0, -0.21), (185.0, 0.21), (369.99, 0.21), (0, -0.21), (369.99, 0.21), (123.47, 0.21), (0, -0.21), (123.47, 0.21), (246.94, 0.21), (0, -0.21), (246.94, 0.21), (123.47, 0.21), (0, -0.21), (123.47, 0.21), (246.94, 0.21), (0, -0.21), (246.94, 0.21), (164.81, 0.21), (329.63, 0.21), (185.0, 0.21), (369.99, 0.21), (155.56, 0.21), (311.13, 0.21), (207.65, 0.21), (415.3, 0.21), (138.59, 0.21), (277.18, 0.21), (185.0, 0.21), (369.99, 0.21), (123.47, 0.21), (246.94, 0.21), (123.47, 0.21), (246.94, 0.21), (164.81, 0.21), (329.63, 0.21), (185.0, 0.21), (369.99, 0.21), (155.56, 0.21), (311.13, 0.21), (207.65, 0.21), (415.3, 0.21), (138.59, 0.21), (277.18, 0.21), (185.0, 0.21), (0, -0.21), (185.0, 0.21), (369.99, 0.21), (0, -0.21), (369.99, 0.21), (123.47, 0.21), (246.94, 0.21), (123.47, 0.21), (246.94, 0.21), (164.81, 0.21), (329.63, 0.21), (185.0, 0.21), (369.99, 0.21), (155.56, 0.21), (311.13, 0.21), (207.65, 0.21), (415.3, 0.21), (138.59, 0.21), (277.18, 0.21), (185.0, 0.21), (369.99, 0.21), (123.47, 0.21), (246.94, 0.21), (123.47, 0.21), (246.94, 0.21), (164.81, 0.21), (207.65, 0.21), (246.94, 0.21), (329.63, 0.21), (155.56, 0.21), (185.0, 0.21), (246.94, 0.21), (311.13, 0.21), (138.59, 0.21), (164.81, 0.21), (207.65, 0.21), (246.94, 0.21), (123.47, 0.21), (155.56, 0.21), (185.0, 0.21), (246.94, 0.21), (164.81, 0.21), (207.65, 0.21), (246.94, 0.21), (329.63, 0.21), (155.56, 0.21), (185.0, 0.21), (246.94, 0.21), (311.13, 0.21), (138.59, 0.21), (164.81, 0.21), (207.65, 0.21), (246.94, 0.21), (123.47, 0.21), (155.56, 0.21), (185.0, 0.21), (246.94, 0.21), (164.81, 0.21), (207.65, 0.21), (246.94, 0.21), (329.63, 0.21), (155.56, 0.21), (185.0, 0.21), (246.94, 0.21), (311.13, 0.21), (138.59, 0.21), (164.81, 0.21), (207.65, 0.21), (246.94, 0.21), (123.47, 0.21), (155.56, 0.21), (185.0, 0.21), (246.94, 0.21), (164.81, 0.21), (207.65, 0.21), (246.94, 0.21), (329.63, 0.21), (155.56, 0.21), (185.0, 0.21), (246.94, 0.21), (311.13, 0.21), (138.59, 0.21), (164.81, 0.21), (207.65, 0.21), (246.94, 0.21), (123.47, 0.21), (155.56, 0.21), (185.0, 0.21), (246.94, 0.21), (164.81, 0.21), (0, -0.21), (164.81, 0.21), (329.63, 0.21), (0, -0.21), (329.63, 0.21), (185.0, 0.21), (0, -0.21), (185.0, 0.21), (369.99, 0.21), (0, -0.21), (369.99, 0.21), (155.56, 0.21), (0, -0.21), (155.56, 0.21), (311.13, 0.21), (0, -0.21), (311.13, 0.21), (207.65, 0.21), (0, -0.21), (207.65, 0.21), (415.3, 0.21), (0, -0.21), (415.3, 0.21), (138.59, 0.21), (0, -0.21), (138.59, 0.21), (277.18, 0.21), (0, -0.21), (277.18, 0.21), (185.0, 0.21), (0, -0.21), (185.0, 0.21), (369.99, 0.21), (0, -0.21), (369.99, 0.21), (123.47, 0.21), (0, -0.21), (123.47, 0.21), (246.94, 0.21), (0, -0.21), (246.94, 0.21), (123.47, 0.21), (0, -0.21), (123.47, 0.21), (246.94, 0.21), (0, -0.21), (246.94, 0.21), (164.81, 0.21), (329.63, 0.21), (185.0, 0.21), (369.99, 0.21), (155.56, 0.21), (311.13, 0.21), (207.65, 0.21), (415.3, 0.21), (138.59, 0.21), (277.18, 0.21), (185.0, 0.21), (369.99, 0.21), (123.47, 0.21), (246.94, 0.21), (123.47, 0.21), (246.94, 0.21), (164.81, 0.21), (329.63, 0.21), (185.0, 0.21), (369.99, 0.21), (155.56, 0.21), (311.13, 0.21), (207.65, 0.21), (415.3, 0.21), (138.59, 0.21), (277.18, 0.21), (185.0, 0.21), (0, -0.21), (185.0, 0.21), (369.99, 0.21), (0, -0.21), (369.99, 0.21), (123.47, 0.21), (246.94, 0.21), (123.47, 0.21), (246.94, 0.21), (164.81, 0.21), (329.63, 0.21), (185.0, 0.21), (369.99, 0.21), (155.56, 0.21), (311.13, 0.21), (207.65, 0.21), (415.3, 0.21), (138.59, 0.21), (277.18, 0.21), (185.0, 0.21), (369.99, 0.21), (123.47, 0.21), (246.94, 0.21), (123.47, 0.21), (246.94, 0.21), (164.81, 0.21), (207.65, 0.21), (246.94, 0.21), (329.63, 0.21), (155.56, 0.21), (185.0, 0.21), (246.94, 0.21), (311.13, 0.21), (138.59, 0.21), (164.81, 0.21), (207.65, 0.21), (246.94, 0.21), (123.47, 0.21), (155.56, 0.21), (185.0, 0.21), (246.94, 0.21), (164.81, 0.21), (207.65, 0.21), (246.94, 0.21), (329.63, 0.21), (155.56, 0.21), (185.0, 0.21), (246.94, 0.21), (311.13, 0.21), (138.59, 0.21), (164.81, 0.21), (207.65, 0.21), (246.94, 0.21), (123.47, 0.21), (155.56, 0.21), (185.0, 0.21), (246.94, 0.21), (164.81, 0.21), (207.65, 0.21), (246.94, 0.21), (329.63, 0.21), (155.56, 0.21), (185.0, 0.21), (246.94, 0.21), (311.13, 0.21), (138.59, 0.21), (164.81, 0.21), (207.65, 0.21), (246.94, 0.21), (123.47, 0.21), (155.56, 0.21), (185.0, 0.21), (246.94, 0.21), (164.81, 0.21), (207.65, 0.21), (246.94, 0.21), (329.63, 0.21), (155.56, 0.21), (185.0, 0.21), (246.94, 0.21), (311.13, 0.21), (138.59, 0.21), (164.81, 0.21), (207.65, 0.21), (246.94, 0.21), (123.47, 0.21), (155.56, 0.21), (185.0, 0.21), (246.94, 0.21), (622.25, 0.11), (659.26, 0.11), (739.99, 0.21), (987.77, 0.21), (622.25, 0.11), (659.26, 0.11), (739.99, 0.11), (987.77, 0.11), (1108.73, 0.11), (1244.51, 0.11), (1108.73, 0.11), (932.33, 0.11), (987.77, 0.21), (739.99, 0.21), (622.25, 0.11), (659.26, 0.11), (739.99, 0.21), (987.77, 0.11), (1108.73, 0.21), (932.33, 0.11), (987.77, 0.11), (1108.73, 0.11), (1318.51, 0.11), (1244.51, 0.11), (1318.51, 0.11), (1108.73, 0.11)] # nyan
    play_melody(notes, **kwargs)


play_nyan()

# want to do stuff with the buttons? this is the way to do it, as exemplified above
while True:
    # the buttons.update() processes button states, and executes button callbacks if any are set
    # so, you can manually check button states after calling update(),
    # or set callbacks and then just call ".update()" in a loop.
    buttons.update()
    """
    if buttons.right:
        pass #do your thing
    """

